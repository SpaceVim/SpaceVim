language: c
dist: trusty
sudo: false
language: generic

git:
  depth: 3

notifications:
  slack:
    on_success: never
    on_failure: never
  email:
    on_success: never # default: change
    on_failure: never # default: always
cache:
  - directories:
    - $HOME/cache/

env:
  global:
    - PATH=$HOME/vim/bin:$PATH
  matrix:
    - LINT=vimlint-errors       VIM=nvim   VIM_VERSION=v0.2.0
    - LINT=vimlint              VIM=nvim   VIM_VERSION=v0.2.0
    - LINT=vint-errors          VIM=nvim   VIM_VERSION=v0.2.0
    - LINT=vint                 VIM=nvim   VIM_VERSION=v0.2.0
    - LINT=vader                VIM=vim    VIM_VERSION=v8.0.0027
    - LINT=vader                VIM=nvim   VIM_VERSION=v0.2.0

os:
  - linux

compiler:
  - gcc

addons:
  apt:
    packages:
      - autoconf
      - clang
      - lcov
      - libperl-dev
      - python-dev
      - python3-dev
      - liblua5.2-dev
      - lua5.2
      - ruby-dev
      - cscope
      - libgtk2.0-dev


matrix:
  allow_failures:
    - env: LINT=vimlint
    - env: LINT=vint

install: .ci/install.sh
script: .ci/script.sh
after_success: .ci/after_success.sh
# $TRAVIS_TEST_RESULT is the log
after_failure: .ci/after_failure.sh
